!/**
 * Highstock JS v12.0.1 (2024-11-28)
 * @module highcharts/indicators/ichimoku-kinko-hyo
 * @requires highcharts
 * @requires highcharts/modules/stock
 *
 * Indicator series type for Highcharts Stock
 *
 * (c) 2010-2024 Sebastian Bochan
 *
 * License: www.highcharts.com/license
 */function(o,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("highcharts"),require("highcharts").dataGrouping.approximations,require("highcharts").Color,require("highcharts").SeriesRegistry):"function"==typeof define&&define.amd?define("highcharts/ichimoku-kinko-hyo",[["highcharts/highcharts"],["highcharts/highcharts","dataGrouping","approximations"],["highcharts/highcharts","Color"],["highcharts/highcharts","SeriesRegistry"]],t):"object"==typeof exports?exports["highcharts/ichimoku-kinko-hyo"]=t(require("highcharts"),require("highcharts").dataGrouping.approximations,require("highcharts").Color,require("highcharts").SeriesRegistry):o.Highcharts=t(o.Highcharts,o.Highcharts.dataGrouping.approximations,o.Highcharts.Color,o.Highcharts.SeriesRegistry)}(this,(o,t,e,i)=>(()=>{"use strict";var n={620:o=>{o.exports=e},512:o=>{o.exports=i},956:o=>{o.exports=t},944:t=>{t.exports=o}},s={};function r(o){var t=s[o];if(void 0!==t)return t.exports;var e=s[o]={exports:{}};return n[o](e,e.exports,r),e.exports}r.n=o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return r.d(t,{a:t}),t},r.d=(o,t)=>{for(var e in t)r.o(t,e)&&!r.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})},r.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t);var p={};r.d(p,{default:()=>G});var a=r(944),l=/*#__PURE__*/r.n(a),h=r(956),u=/*#__PURE__*/r.n(h),c=r(620),g=/*#__PURE__*/r.n(c),k=r(512),f=/*#__PURE__*/r.n(k);let{parse:d}=g(),{sma:S}=f().seriesTypes,{defined:y,extend:x,isArray:m,isNumber:v,getClosestDistance:C,merge:A,objectEach:Y}=l();function P(o){return{high:o.reduce(function(o,t){return Math.max(o,t[1])},-1/0),low:o.reduce(function(o,t){return Math.min(o,t[2])},1/0)}}function B(o){let t=o.indicator;t.points=o.points,t.nextPoints=o.nextPoints,t.color=o.color,t.options=A(o.options.senkouSpan.styles,o.gap),t.graph=o.graph,t.fillGraph=!0,f().seriesTypes.sma.prototype.drawGraph.call(t)}class b extends S{constructor(){super(...arguments),this.data=[],this.options={},this.points=[],this.graphCollection=[]}init(){super.init.apply(this,arguments),this.options=A({tenkanLine:{styles:{lineColor:this.color}},kijunLine:{styles:{lineColor:this.color}},chikouLine:{styles:{lineColor:this.color}},senkouSpanA:{styles:{lineColor:this.color,fill:d(this.color).setOpacity(.5).get()}},senkouSpanB:{styles:{lineColor:this.color,fill:d(this.color).setOpacity(.5).get()}},senkouSpan:{styles:{fill:d(this.color).setOpacity(.2).get()}}},this.options)}toYData(o){return[o.tenkanSen,o.kijunSen,o.chikouSpan,o.senkouSpanA,o.senkouSpanB]}translate(){for(let o of(f().seriesTypes.sma.prototype.translate.apply(this),this.points))for(let t of this.pointArrayMap){let e=o[t];v(e)&&(o["plot"+t]=this.yAxis.toPixels(e,!0),o.plotY=o["plot"+t],o.tooltipPos=[o.plotX,o["plot"+t]],o.isNull=!1)}}drawGraph(){let o=this,t=o.points,e=o.options,i=o.graph,n=o.color,s={options:{gapSize:e.gapSize}},r=o.pointArrayMap.length,p=[[],[],[],[],[],[]],a={tenkanLine:p[0],kijunLine:p[1],chikouLine:p[2],senkouSpanA:p[3],senkouSpanB:p[4],senkouSpan:p[5]},l=[],h=o.options.senkouSpan,u=h.color||h.styles.fill,c=h.negativeColor,g=[[],[]],k=[[],[]],d=t.length,S=0,x,m,v,C,P,b,G,N,X,T,j,O,L;for(o.ikhMap=a;d--;){for(v=0,m=t[d];v<r;v++)y(m[x=o.pointArrayMap[v]])&&p[v].push({plotX:m.plotX,plotY:m["plot"+x],isNull:!1});if(c&&d!==t.length-1){let o=a.senkouSpanB.length-1,t=function(o,t,e,i){if(o&&t&&e&&i){let n=t.plotX-o.plotX,s=t.plotY-o.plotY,r=i.plotX-e.plotX,p=i.plotY-e.plotY,a=o.plotX-e.plotX,l=o.plotY-e.plotY,h=(-s*a+n*l)/(-r*s+n*p),u=(r*l-p*a)/(-r*s+n*p);if(h>=0&&h<=1&&u>=0&&u<=1)return{plotX:o.plotX+u*n,plotY:o.plotY+u*s}}}(a.senkouSpanA[o-1],a.senkouSpanA[o],a.senkouSpanB[o-1],a.senkouSpanB[o]);if(t){let e={plotX:t.plotX,plotY:t.plotY,isNull:!1,intersectPoint:!0};a.senkouSpanA.splice(o,0,e),a.senkouSpanB.splice(o,0,e),l.push(o)}}}if(Y(a,(t,i)=>{e[i]&&"senkouSpan"!==i&&(o.points=p[S],o.options=A(e[i].styles,s),o.graph=o["graph"+i],o.fillGraph=!1,o.color=n,f().seriesTypes.sma.prototype.drawGraph.call(o),o["graph"+i]=o.graph),S++}),o.graphCollection)for(let t of o.graphCollection)o[t].destroy(),delete o[t];if(o.graphCollection=[],c&&a.senkouSpanA[0]&&a.senkouSpanB[0]){for(l.unshift(0),l.push(a.senkouSpanA.length-1),O=0;O<l.length-1;O++)if(C=l[O],P=l[O+1],b=a.senkouSpanB.slice(C,P+1),G=a.senkouSpanA.slice(C,P+1),Math.floor(b.length/2)>=1){let o=Math.floor(b.length/2);if(b[o].plotY===G[o].plotY){for(L=0,N=0,X=0;L<b.length;L++)N+=b[L].plotY,X+=G[L].plotY;g[j=N>X?0:1]=g[j].concat(b),k[j]=k[j].concat(G)}else g[j=b[o].plotY>G[o].plotY?0:1]=g[j].concat(b),k[j]=k[j].concat(G)}else g[j=b[0].plotY>G[0].plotY?0:1]=g[j].concat(b),k[j]=k[j].concat(G);["graphsenkouSpanColor","graphsenkouSpanNegativeColor"].forEach(function(t,i){g[i].length&&k[i].length&&(T=0===i?u:c,B({indicator:o,points:g[i],nextPoints:k[i],color:T,options:e,gap:s,graph:o[t]}),o[t]=o.graph,o.graphCollection.push(t))})}else B({indicator:o,points:a.senkouSpanB,nextPoints:a.senkouSpanA,color:u,options:e,gap:s,graph:o.graphsenkouSpan}),o.graphsenkouSpan=o.graph;delete o.nextPoints,delete o.fillGraph,o.points=t,o.options=e,o.graph=i,o.color=n}getGraphPath(o){let t=[],e,i=[];if(o=o||this.points,this.fillGraph&&this.nextPoints){if((e=f().seriesTypes.sma.prototype.getGraphPath.call(this,this.nextPoints))&&e.length){e[0][0]="L",t=f().seriesTypes.sma.prototype.getGraphPath.call(this,o),i=e.slice(0,t.length);for(let o=i.length-1;o>=0;o--)t.push(i[o])}}else t=f().seriesTypes.sma.prototype.getGraphPath.apply(this,arguments);return t}getValues(o,t){let e,i,n,s,r,p,a,l,h,u;let c=t.period,g=t.periodTenkan,k=t.periodSenkouSpanB,f=o.xData,d=o.yData,S=o.xAxis,y=d&&d.length||0,x=C(S.series.map(o=>o.getColumn("x"))),v=[],A=[];if(f.length<=c||!m(d[0])||4!==d[0].length)return;let Y=f[0]-c*x;for(r=0;r<c;r++)A.push(Y+r*x);for(r=0;r<y;r++)r>=g&&(p=((i=P(d.slice(r-g,r))).high+i.low)/2),r>=c&&(h=(p+(a=((n=P(d.slice(r-c,r))).high+n.low)/2))/2),r>=k&&(u=((s=P(d.slice(r-k,r))).high+s.low)/2),l=d[r][3],e=f[r],void 0===v[r]&&(v[r]=[]),void 0===v[r+c-1]&&(v[r+c-1]=[]),v[r+c-1][0]=p,v[r+c-1][1]=a,v[r+c-1][2]=void 0,void 0===v[r+1]&&(v[r+1]=[]),v[r+1][2]=l,r<=c&&(v[r+c-1][3]=void 0,v[r+c-1][4]=void 0),void 0===v[r+2*c-2]&&(v[r+2*c-2]=[]),v[r+2*c-2][3]=h,v[r+2*c-2][4]=u,A.push(e);for(r=1;r<=c;r++)A.push(e+r*x);return{values:v,xData:A,yData:v}}}b.defaultOptions=A(S.defaultOptions,{params:{index:void 0,period:26,periodTenkan:9,periodSenkouSpanB:52},marker:{enabled:!1},tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> <b> {series.name}</b><br/>TENKAN SEN: {point.tenkanSen:.3f}<br/>KIJUN SEN: {point.kijunSen:.3f}<br/>CHIKOU SPAN: {point.chikouSpan:.3f}<br/>SENKOU SPAN A: {point.senkouSpanA:.3f}<br/>SENKOU SPAN B: {point.senkouSpanB:.3f}<br/>'},tenkanLine:{styles:{lineWidth:1,lineColor:void 0}},kijunLine:{styles:{lineWidth:1,lineColor:void 0}},chikouLine:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanA:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanB:{styles:{lineWidth:1,lineColor:void 0}},senkouSpan:{styles:{fill:"rgba(255, 0, 0, 0.5)"}},dataGrouping:{approximation:"ichimoku-averages"}}),x(b.prototype,{pointArrayMap:["tenkanSen","kijunSen","chikouSpan","senkouSpanA","senkouSpanB"],pointValKey:"tenkanSen",nameComponents:["periodSenkouSpanB","period","periodTenkan"]}),u()["ichimoku-averages"]=function(){let o;let t=[];return[].forEach.call(arguments,function(e,i){t.push(u().average(e)),o=!o&&void 0===t[i]}),o?void 0:t},f().registerSeriesType("ikh",b);let G=l();return p.default})());