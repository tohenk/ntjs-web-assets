/* SCEditor v3.2.1 | (C) 2017, Sam Clarke | sceditor.com/license */
(()=>{var i=(A=jQuery)&&"object"==typeof A&&"default"in A?A:{default:A};function a(e,t){return typeof t===e}var ye=a.bind(null,"string"),Xe=a.bind(null,"undefined"),Ke=a.bind(null,"function"),l=a.bind(null,"number");function s(e){return!Object.keys(e).length}function be(e,t){var n=e===!!e,o=n?2:1,r=n?t:e,i=n&&e;function a(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}for(;o<arguments.length;o++){var l,s=arguments[o];for(l in s){var c,u,d=r[l],f=s[l];Xe(f)||"__proto__"!==l&&"constructor"!==l&&(u=a(f),c=Array.isArray(f),i&&(u||c)?(u=a(d)===u&&Array.isArray(d)===c,r[l]=be(!0,u?d:c?[]:{},f)):r[l]=f)}}return r}function Ze(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function xe(t,n){if(Array.isArray(t)||"length"in t&&l(t.length))for(var e=0;e<t.length;e++)n(e,t[e]);else Object.keys(t).forEach(function(e){n(e,t[e])})}var c={},we=1,Te=3,u=8;function r(e){return e=parseFloat(e),isFinite(e)?e:0}function Ee(e,t,n){var o=(n||document).createElement(e);return xe(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function Qe(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||Me(n,t))return n}function Ce(e,t){return Me(e,t)?e:Qe(e,t)}function Se(e){e.parentNode&&e.parentNode.removeChild(e)}function Ne(e,t){e.appendChild(t)}function ke(e,t){return e.querySelectorAll(t)}function Ae(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ye(o)?(t=r["_sce-event-"+e+o]||function(e){for(var t=e.target;t&&t!==n;){if(Me(t,o))return void r.call(t,e);t=t.parentNode}},r["_sce-event-"+e+o]=t):(t=o,i=r),n.addEventListener(e,t,i||!1)})}function De(n,e,o,r,i){e.split(" ").forEach(function(e){var t;ye(o)?t=r["_sce-event-"+e+o]:(t=o,i=r),n.removeEventListener(e,t,i||!1)})}function _e(e,t,n){if(arguments.length<3)return e.getAttribute(t);null==n?Je(e,t):e.setAttribute(t,n)}function Je(e,t){e.removeAttribute(t)}function et(e){Re(e,"display","none")}function tt(e){Re(e,"display","")}function nt(e){(st(e)?et:tt)(e)}function Re(n,e,t){if(arguments.length<3){if(ye(e))return 1===n.nodeType?getComputedStyle(n)[e]:null;xe(e,function(e,t){Re(n,e,t)})}else{var o=(t||0===t)&&!isNaN(t);n.style[e]=o?t+"px":t}}function ot(e,t,n){var o=arguments.length,r={};if(e.nodeType===we)return 1===o?(xe(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(r[t.name.substr(5)]=t.value)}),r):2===o?_e(e,"data-"+t):void _e(e,"data-"+t,String(n))}function Me(e,t){return!(!e||e.nodeType!==we)&&(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t)}function Oe(e,t){t.parentNode.insertBefore(e,t)}function d(e){return e.className.trim().split(/\s+/)}function rt(e,t){return Me(e,"."+t)}function Le(e,t){var n=d(e);n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function it(e,t){var n=d(e);Ze(n,t),e.className=n.join(" ")}function Ie(e,t,n){((n=Xe(n)?!rt(e,t):n)?Le:it)(e,t)}function at(e,t){var n,o;if(Xe(t))return n=r((o=getComputedStyle(e)).paddingLeft)+r(o.paddingRight),o=r(o.borderLeftWidth)+r(o.borderRightWidth),e.offsetWidth-n-o;Re(e,"width",t)}function ze(e,t){var n,o;if(Xe(t))return n=r((o=getComputedStyle(e)).paddingTop)+r(o.paddingBottom),o=r(o.borderTopWidth)+r(o.borderBottomWidth),e.offsetHeight-n-o;Re(e,"height",t)}function lt(e,t,n){var o;Ke(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function st(e){return e.getClientRects().length}function f(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===f(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function ct(e,t,n,o){f(e,t,n,o,!0)}function ut(e,t){var n=(t=t||document).createDocumentFragment(),o=Ee("div",{},t);for(o.innerHTML=e;o.firstChild;)Ne(n,o.firstChild);return n}function dt(e){return e&&(!Me(e,"p,div")||e.className||_e(e,"style")||!s(ot(e)))}function ft(e,t){var n=Ee(t,{},e.ownerDocument);for(xe(e.attributes,function(e,t){try{_e(n,t.name,t.value)}catch(e){}});e.firstChild;)Ne(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}var p="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|";function pt(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0}function Fe(e,t){var n=(e||{}).nodeType||Te;return n!==we?n===Te:"code"===(n=e.tagName.toLowerCase())?!t:p.indexOf("|"+n+"|")<0}function m(e){return e.lastChild&&m(e.lastChild)&&Se(e.lastChild),3===e.nodeType?!e.nodeValue:pt(e)&&!e.childNodes.length}function mt(e){f(e,function(e){var t=!Fe(e,!0)&&e.nodeType!==u,n=e.parentNode;if(t&&(Fe(n,!0)||"P"===n.tagName)){for(var o=e;Fe(o.parentNode,!0)||"P"===o.parentNode.tagName;)o=o.parentNode;for(var r=h(o,e),i=e;n&&Fe(n,!0);){if(n.nodeType===we){for(var a=n.cloneNode();i.firstChild;)Ne(a,i.firstChild);Ne(i,a)}n=n.parentNode}Oe(i,o),m(r)||Oe(r,i),m(o)&&Se(o)}t&&Me(e,"ul,ol")&&Me(e.parentNode,"ul,ol")&&(t=(t=e).previousElementSibling,(t=(r="li")&&t&&!Me(t,r)?null:t)||Oe(t=Ee("li"),e),Ne(t,e))})}function g(e,t){return e?(t?e.previousSibling:e.nextSibling)||g(e.parentNode,t):null}function gt(e){var t,n,o,r,i,a,l=Re(e,"whiteSpace"),s=/line$/i.test(l),c=e.firstChild;if(!/pre(\-wrap)?$/i.test(l))for(;c;){if(i=c.nextSibling,t=c.nodeValue,(n=c.nodeType)===we&&c.firstChild&&gt(c),n===Te){for(n=g(c),o=g(c,!0),a=!1;rt(o,"sceditor-ignore");)o=g(o,!0);if(Fe(c)&&o){for(r=o;r.lastChild;)for(r=r.lastChild;rt(r,"sceditor-ignore");)r=g(r,!0);a=r.nodeType===Te?/[\t\n\r ]$/.test(r.nodeValue):!Fe(r)}t=t.replace(/\u200B/g,""),o&&Fe(o)&&!a||(t=t.replace(s?/^[\t ]+/:/^[\t\n\r ]+/,"")),(t=n&&Fe(n)?t:t.replace(s?/[\t ]+$/:/[\t\n\r ]+$/,"")).length?c.nodeValue=t.replace(s?/[\t ]+/g:/[\t\n\r ]+/g," "):Se(c)}c=i}}function h(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function ht(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function v(e,t){var n=e.style;return c[t]||(c[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),n=n[t=c[t]],"textAlign"===t&&(n=n||Re(e,t),Re(e.parentNode,t)===n||"block"!==Re(e,"display")||Me(e,"hr,th"))?"":n}function vt(e,t){var n=e.attributes.length;if(n===t.attributes.length){for(;n--;){var o=e.attributes[n];if("style"===o.name?!((e,t)=>{var n=e.style.length;if(n===t.style.length){for(;n--;){var o=e.style[n];if(e.style[o]!==t.style[o])return}return 1}})(e,t):o.value!==_e(t,o.name))return}return 1}}function yt(e){for(;e.firstChild;)Oe(e.firstChild,e);Se(e)}var y,bt={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:_e(document.documentElement,"lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,allowedIframeUrls:[],parserOptions:{},dropDownCss:{},allowedTags:[],allowedAttributes:[]},b=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,x=/^data:image\/(png|bmp|gif|p?jpe?g);/i,w=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function xt(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function He(e,t){var n;return e&&(!(n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"})!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e=e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})),e}function wt(e){var t,n=window.location;return!e||x.test(e)||b.test(e.replace(w,""))||((t=n.pathname.split("/")).pop(),e=n.protocol+"//"+n.host+t.join("/")+"/"+e,b.test(e.replace(w,"")))?e:""}function Tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k(y,t)}let{entries:Et,setPrototypeOf:T,isFrozen:E,getPrototypeOf:C,getOwnPropertyDescriptor:S}=Object,{freeze:je,seal:e,create:Ct}=Object,{apply:N,construct:k}="undefined"!=typeof Reflect&&Reflect,St=(je=je||function(e){return e},e=e||function(e){return e},N=N||function(e,t){for(var n=arguments.length,o=new Array(2<n?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return e.apply(t,o)},k=k||function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return new e(...n)},o(Array.prototype.forEach)),Nt=o(Array.prototype.lastIndexOf),kt=o(Array.prototype.pop),At=o(Array.prototype.push),Dt=o(Array.prototype.splice),_t=o(String.prototype.toLowerCase),Rt=o(String.prototype.toString),Mt=o(String.prototype.match),Ot=o(String.prototype.replace),Lt=o(String.prototype.indexOf),It=o(String.prototype.trim),Ve=o(Object.prototype.hasOwnProperty),Ge=o(RegExp.prototype.test);y=TypeError;function o(r){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return N(r,e,n)}}function qe(t,n,e){var o,r=2<arguments.length&&void 0!==e?e:_t;T&&T(t,null);let i=n.length;for(;i--;){let e=n[i];"string"==typeof e&&(o=r(e))!==e&&(E(n)||(n[i]=o),e=o),t[e]=!0}return t}function Ye(e){var t,n,o=Ct(null);for([t,n]of Et(e))Ve(e,t)&&(Array.isArray(n)?o[t]=(t=>{for(let e=0;e<t.length;e++)Ve(t,e)||(t[e]=null);return t})(n):n&&"object"==typeof n&&n.constructor===Object?o[t]=Ye(n):o[t]=n);return o}function zt(e,t){for(;null!==e;){var n=S(e,t);if(n){if(n.get)return o(n.get);if("function"==typeof n.value)return o(n.value)}e=C(e)}return function(){return null}}let Ft=je(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ht=je(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Pt=je(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bt=je(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ut=je(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Wt=je(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),jt=je(["#text"]),Vt=je(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Gt=je(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qt=je(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yt=je(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var A=e(/\{\{[\w\W]*|[\w\W]*\}\}/gm),D=e(/<%[\w\W]*|[\w\W]*%>/gm),_=e(/\$\{[\w\W]*/gm),t=e(/^data-[\-\w.\u00B7-\uFFFF]+$/),n=e(/^aria-[\-\w]+$/);let $t=e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),R=e(/^(?:\w+script|data):/i),M=e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Xt=e(/^html$/i);var O=e(/^[a-z][.\w]*(-[.\w]+)+$/i),Kt=Object.freeze({__proto__:null,ARIA_ATTR:n,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:O,DATA_ATTR:t,DOCTYPE_NAME:Xt,ERB_EXPR:D,IS_ALLOWED_URI:$t,IS_SCRIPT_OR_DATA:R,MUSTACHE_EXPR:A,TMPLIT_EXPR:_});function Zt(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}}let Qt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12};var Jt=function i(e){e=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;let u=e=>i(e);if(u.version="3.2.7",u.removed=[],!e||!e.document||e.document.nodeType!==Qt.document||!e.Element)return u.isSupported=!1,u;let r=e.document,l=r,F=l.currentScript,{DocumentFragment:H,HTMLTemplateElement:P,Node:s,Element:B,NodeFilter:t,NamedNodeMap:U=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:W,DOMParser:j,trustedTypes:d}=e,V=zt(e=B.prototype,"cloneNode"),G=zt(e,"remove"),q=zt(e,"nextSibling"),Y=zt(e,"childNodes"),a=zt(e,"parentNode");function $(e){return e instanceof RegExp||e instanceof Function}function X(e){e=0<arguments.length&&void 0!==e?e:{};if(!o||o!==e){if(e=Ye(e&&"object"==typeof e?e:{}),O=-1===Ie.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,L="application/xhtml+xml"===O?Rt:_t,g=Ve(e,"ALLOWED_TAGS")?qe({},e.ALLOWED_TAGS,L):me,h=Ve(e,"ALLOWED_ATTR")?qe({},e.ALLOWED_ATTR,L):ge,Me=Ve(e,"ALLOWED_NAMESPACES")?qe({},e.ALLOWED_NAMESPACES,Rt):Oe,De=Ve(e,"ADD_URI_SAFE_ATTR")?qe(Ye(_e),e.ADD_URI_SAFE_ATTR,L):_e,ke=Ve(e,"ADD_DATA_URI_TAGS")?qe(Ye(Ae),e.ADD_DATA_URI_TAGS,L):Ae,N=Ve(e,"FORBID_CONTENTS")?qe({},e.FORBID_CONTENTS,L):Ne,y=Ve(e,"FORBID_TAGS")?qe({},e.FORBID_TAGS,L):Ye({}),he=Ve(e,"FORBID_ATTR")?qe({},e.FORBID_ATTR,L):Ye({}),n=!!Ve(e,"USE_PROFILES")&&e.USE_PROFILES,ve=!1!==e.ALLOW_ARIA_ATTR,ye=!1!==e.ALLOW_DATA_ATTR,be=e.ALLOW_UNKNOWN_PROTOCOLS||!1,xe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,b=e.SAFE_FOR_TEMPLATES||!1,x=!1!==e.SAFE_FOR_XML,w=e.WHOLE_DOCUMENT||!1,T=e.RETURN_DOM||!1,E=e.RETURN_DOM_FRAGMENT||!1,C=e.RETURN_TRUSTED_TYPE||!1,Te=e.FORCE_BODY||!1,Ee=!1!==e.SANITIZE_DOM,Ce=e.SANITIZE_NAMED_PROPS||!1,Se=!1!==e.KEEP_CONTENT,S=e.IN_PLACE||!1,pe=e.ALLOWED_URI_REGEXP||$t,_=e.NAMESPACE||D,R=e.MATHML_TEXT_INTEGRATION_POINTS||R,M=e.HTML_INTEGRATION_POINTS||M,v=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&$(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(v.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&$(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(v.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(v.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),b&&(ye=!1),E&&(T=!0),n&&(g=qe({},jt),h=[],!0===n.html&&(qe(g,Ft),qe(h,Vt)),!0===n.svg&&(qe(g,Ht),qe(h,Gt),qe(h,Yt)),!0===n.svgFilters&&(qe(g,Pt),qe(h,Gt),qe(h,Yt)),!0===n.mathMl)&&(qe(g,Ut),qe(h,qt),qe(h,Yt)),e.ADD_TAGS&&qe(g=g===me?Ye(g):g,e.ADD_TAGS,L),e.ADD_ATTR&&qe(h=h===ge?Ye(h):h,e.ADD_ATTR,L),e.ADD_URI_SAFE_ATTR&&qe(De,e.ADD_URI_SAFE_ATTR,L),e.FORBID_CONTENTS&&qe(N=N===Ne?Ye(N):N,e.FORBID_CONTENTS,L),Se&&(g["#text"]=!0),w&&qe(g,["html","head","body"]),g.table&&(qe(g,["tbody"]),delete y.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Tt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Tt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=e.TRUSTED_TYPES_POLICY,c=p.createHTML("")}else null!==(p=void 0===p?((e,t)=>{if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;var n="data-tt-policy-suffix",t="dompurify"+((n=t&&t.hasAttribute(n)?t.getAttribute(n):null)?"#"+n:"");try{return e.createPolicy(t,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}})(d,F):p)&&"string"==typeof c&&(c=p.createHTML(""));je&&je(e),o=e}}function f(e,t){try{At(u.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){At(u.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(T||E)try{I(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}function K(e){let t=null,n=null;Te?e="<remove></remove>"+e:(o=Mt(e,/^[\r\n\t ]+/),n=o&&o[0]),"application/xhtml+xml"===O&&_===D&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=p?p.createHTML(e):e;if(_===D)try{t=(new j).parseFromString(o,O)}catch(e){}if(!t||!t.documentElement){t=ee.createDocument(_,"template",null);try{t.documentElement.innerHTML=Re?c:o}catch(e){}}return o=t.body||t.documentElement,e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),_===D?oe.call(t,w?"html":"body")[0]:w?t.documentElement:o}function Z(e){return te.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT|t.SHOW_PROCESSING_INSTRUCTION|t.SHOW_CDATA_SECTION,null)}function Q(e){return e instanceof W&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof U)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)}function J(e){return"function"==typeof s&&e instanceof s}"function"==typeof P&&(e=r.createElement("template")).content&&e.content.ownerDocument&&(r=e.content.ownerDocument);let p,c="",{implementation:ee,createNodeIterator:te,createDocumentFragment:ne,getElementsByTagName:oe}=r,re=l.importNode,m=Zt(),{MUSTACHE_EXPR:ie,ERB_EXPR:ae,TMPLIT_EXPR:le,DATA_ATTR:se,ARIA_ATTR:ce,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:de,CUSTOM_ELEMENT:fe}=(u.isSupported="function"==typeof Et&&"function"==typeof a&&ee&&void 0!==ee.createHTMLDocument,Kt),pe=Kt.IS_ALLOWED_URI,g=null,me=qe({},[...Ft,...Ht,...Pt,...Ut,...jt]),h=null,ge=qe({},[...Vt,...Gt,...qt,...Yt]),v=Object.seal(Ct(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),y=null,he=null,ve=!0,ye=!0,be=!1,xe=!0,b=!1,x=!0,w=!1,we=!1,Te=!1,T=!1,E=!1,C=!1,Ee=!0,Ce=!1,Se=!0,S=!1,n={},N=null,Ne=qe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ke=null,Ae=qe({},["audio","video","img","source","image","track"]),De=null,_e=qe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),k="http://www.w3.org/1998/Math/MathML",A="http://www.w3.org/2000/svg",D="http://www.w3.org/1999/xhtml",_=D,Re,Me=null,Oe=qe({},[k,A,D],Rt),R=qe({},["mi","mo","mn","ms","mtext"]),M=qe({},["annotation-xml"]),Le=qe({},["title","style","font","a","script"]),O=null,Ie=["application/xhtml+xml","text/html"],L=null,o=null,ze=r.createElement("form"),Fe=qe({},[...Ht,...Pt,...Bt]),He=qe({},[...Ut,...Wt]),I=function(t){At(u.removed,{element:t});try{a(t).removeChild(t)}catch(e){G(t)}};function z(e,t,n){St(e,e=>{e.call(u,t,n,o)})}function Pe(t){let n=null;if(z(m.beforeSanitizeElements,t,null),!Q(t)){var e=L(t.nodeName);if(z(m.uponSanitizeElement,t,{tagName:e,allowedTags:g}),!(x&&t.hasChildNodes()&&!J(t.firstElementChild)&&Ge(/<[/\w!]/g,t.innerHTML)&&Ge(/<[/\w!]/g,t.textContent)||t.nodeType===Qt.progressingInstruction||x&&t.nodeType===Qt.comment&&Ge(/<[/\w]/g,t.data))){if(g[e]&&!y[e])return t instanceof B&&!(e=>{let t=a(e);t&&t.tagName||(t={namespaceURI:_,tagName:"template"});var n=_t(e.tagName),o=_t(t.tagName);return!!Me[e.namespaceURI]&&(e.namespaceURI===A?t.namespaceURI===D?"svg"===n:t.namespaceURI===k?"svg"===n&&("annotation-xml"===o||R[o]):Boolean(Fe[n]):e.namespaceURI===k?t.namespaceURI===D?"math"===n:t.namespaceURI===A?"math"===n&&M[o]:Boolean(He[n]):e.namespaceURI===D?!(t.namespaceURI===A&&!M[o]||t.namespaceURI===k&&!R[o]||He[n])&&(Le[n]||!Fe[n]):!("application/xhtml+xml"!==O||!Me[e.namespaceURI]))})(t)||("noscript"===e||"noembed"===e||"noframes"===e)&&Ge(/<\/no(script|embed|frames)/i,t.innerHTML)?I(t):(b&&t.nodeType===Qt.text&&(n=t.textContent,St([ie,ae,le],e=>{n=Ot(n,e," ")}),t.textContent!==n)&&(At(u.removed,{element:t.cloneNode()}),t.textContent=n),z(m.afterSanitizeElements,t,null));if(!y[e]&&We(e)){if(v.tagNameCheck instanceof RegExp&&Ge(v.tagNameCheck,e))return;if(v.tagNameCheck instanceof Function&&v.tagNameCheck(e))return}if(Se&&!N[e]){var o=a(t)||t.parentNode,r=Y(t)||t.childNodes;if(r&&o)for(let e=r.length-1;0<=e;--e){var i=V(r[e],!0);i.__removalCount=(t.__removalCount||0)+1,o.insertBefore(i,q(t))}}}}I(t)}function Be(e,t,n){if(Ee&&("id"===t||"name"===t)&&(n in r||n in ze))return!1;if((!ye||he[t]||!Ge(se,t))&&(!ve||!Ge(ce,t)))if(!h[t]||he[t]){if(!(We(e)&&(v.tagNameCheck instanceof RegExp&&Ge(v.tagNameCheck,e)||v.tagNameCheck instanceof Function&&v.tagNameCheck(e))&&(v.attributeNameCheck instanceof RegExp&&Ge(v.attributeNameCheck,t)||v.attributeNameCheck instanceof Function&&v.attributeNameCheck(t,e))||"is"===t&&v.allowCustomizedBuiltInElements&&(v.tagNameCheck instanceof RegExp&&Ge(v.tagNameCheck,n)||v.tagNameCheck instanceof Function&&v.tagNameCheck(n))))return!1}else if(!De[t]&&!Ge(pe,Ot(n,de,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Lt(n,"data:")||!ke[e])&&(!be||Ge(ue,Ot(n,de,"")))&&n)return!1;return!0}function Ue(l){z(m.beforeSanitizeAttributes,l,null);var s=l.attributes;if(s&&!Q(l)){let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:h,forceKeepAttr:void 0},a=s.length;for(;a--;){let{name:t,namespaceURI:e,value:n}=s[a],o=L(t),r="value"===t?n:It(n);if(i.attrName=o,i.attrValue=r,i.keepAttr=!0,i.forceKeepAttr=void 0,z(m.uponSanitizeAttribute,l,i),r=i.attrValue,!Ce||"id"!==o&&"name"!==o||(f(t,l),r="user-content-"+r),x&&Ge(/((--!?|])>)|<\/(style|title|textarea)/i,r))f(t,l);else if("attributename"===o&&Mt(r,"href"))f(t,l);else if(!i.forceKeepAttr)if(i.keepAttr)if(!xe&&Ge(/\/>/i,r))f(t,l);else{b&&St([ie,ae,le],e=>{r=Ot(r,e," ")});var c=L(l.nodeName);if(Be(c,o,r)){if(p&&"object"==typeof d&&"function"==typeof d.getAttributeType&&!e)switch(d.getAttributeType(c,o)){case"TrustedHTML":r=p.createHTML(r);break;case"TrustedScriptURL":r=p.createScriptURL(r)}if(r!==n)try{e?l.setAttributeNS(e,t,r):l.setAttribute(t,r),Q(l)?I(l):kt(u.removed)}catch(e){f(t,l)}}else f(t,l)}else f(t,l)}z(m.afterSanitizeAttributes,l,null)}}let We=function(e){return"annotation-xml"!==e&&Mt(e,fe)};return u.sanitize=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let o=null,r=null;if("string"!=typeof(e=(Re=!e)?"\x3c!--\x3e":e)&&!J(e)){if("function"!=typeof e.toString)throw Tt("toString is not a function");if("string"!=typeof(e=e.toString()))throw Tt("dirty is not a string, aborting")}if(!u.isSupported)return e;if(we||X(n),u.removed=[],S="string"!=typeof e&&S){if(e.nodeName&&(n=L(e.nodeName),!g[n]||y[n]))throw Tt("root node is forbidden and cannot be sanitized in-place")}else if(e instanceof s)(n=(o=K("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType===Qt.element&&"BODY"===n.nodeName||"HTML"===n.nodeName?o=n:o.appendChild(n);else{if(!T&&!b&&!w&&-1===e.indexOf("<"))return p&&C?p.createHTML(e):e;if(!(o=K(e)))return T?null:C?c:""}o&&Te&&I(o.firstChild);for(var i=Z(S?e:o);t=i.nextNode();)Pe(t),Ue(t),t.content instanceof H&&function e(t){var n,o=Z(t);for(z(m.beforeSanitizeShadowDOM,t,null);n=o.nextNode();)z(m.uponSanitizeShadowNode,n,null),Pe(n),Ue(n),n.content instanceof H&&e(n.content);z(m.afterSanitizeShadowDOM,t,null)}(t.content);if(S)return e;if(T){if(E)for(r=ne.call(o.ownerDocument);o.firstChild;)r.appendChild(o.firstChild);else r=o;return r=h.shadowroot||h.shadowrootmode?re.call(l,r,!0):r}let a=w?o.outerHTML:o.innerHTML;return w&&g["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&Ge(Xt,o.ownerDocument.doctype.name)&&(a="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+a),b&&St([ie,ae,le],e=>{a=Ot(a,e," ")}),p&&C?p.createHTML(a):a},u.setConfig=function(){X(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),we=!0},u.clearConfig=function(){o=null,we=!1},u.isValidAttribute=function(e,t,n){return o||X({}),Be(e=L(e),t=L(t),n)},u.addHook=function(e,t){"function"==typeof t&&At(m[e],t)},u.removeHook=function(e,t){return void 0!==t?-1===(t=Nt(m[e],t))?void 0:Dt(m[e],t,1)[0]:kt(m[e])},u.removeHooks=function(e){m[e]=[]},u.removeAllHooks=function(){m=Zt()},u}(),L={html:'<!DOCTYPE html><html{attrs}><head><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="image">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube-nocookie.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'};function Pe(e,t,n,o){var r=L[e];return Object.keys(t).forEach(function(e){!1!==o&&(t[e]=He(String(t[e]))),r=r.replace(new RegExp(xt("{"+e+"}"),"g"),t[e])}),!1!==o&&(r=Jt.sanitize(r,{ADD_ATTR:["unselectable"]})),r=n?ut(r):r}function I(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t=t&&t.nextSibling}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&!/^pre/.test(Re(n.parentNode,"whiteSpace"))&&Se(n),n=t}}var Be={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===Re(e,"direction"),e=Re(e,"textAlign"),/left/.test(e)||e===(t?"start":"end")},exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{state:function(e){var t;if(e=e&&3===e.nodeType?e.parentNode:e)return t="ltr"===Re(e,"direction"),e=Re(e,"textAlign"),/right/.test(e)||e===(t?"end":"start")},exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,e,n){var o=Ee("div");Ae(o,"click","a",function(e){n(ot(this,"font")),t.closeDropDown(!0),e.preventDefault()}),t.opts.fonts.split(",").forEach(function(e){Ne(o,Pe("fontOpt",{font:e},!0))}),t.createDropDown(e,"font-picker",o)},exec:function(e){var t=this;Be.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,e,n){var o=Ee("div");Ae(o,"click","a",function(e){n(ot(this,"size")),t.closeDropDown(!0),e.preventDefault()});for(var r=1;r<=7;r++)Ne(o,Pe("sizeOpt",{size:r},!0));t.createDropDown(e,"fontsize-picker",o)},exec:function(e){var t=this;Be.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,e,n){var o=Ee("div"),r="",i=Be.color;i._htmlCache||(t.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){/^[\#a-z0-9\-\(\) \/%\.]+$/i.test(e)||(e=""),r+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),r+="</div>"}),i._htmlCache=r),Ne(o,ut(i._htmlCache)),Ae(o,"click","a",function(e){n(ot(this,"color")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"color-picker",o)},exec:function(e){var t=this;Be.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=Ee("div"),o=this;Ne(n,Pe("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),Ae(n,"click",".button",function(e){(t=ke(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){I(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){I(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n;return Me(t,"li")||Me(t,"ul,ol,menu")&&(n=(t=this.getRangeHelper().selectedRange()).startContainer.parentNode,t=t.endContainer.parentNode,n!==n.parentNode.firstElementChild||Me(t,"li")&&t!==t.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),Ce(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return Ce(t,"ul,ol,menu")?0:-1},exec:function(){Ce(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var r=this,i=Ee("div");Ne(i,Pe("table",{rows:r._("Rows:"),cols:r._("Cols:"),insert:r._("Insert")},!0)),Ae(i,"click",".button",function(e){var t=Number(ke(i,"#rows")[0].value),n=Number(ke(i,"#cols")[0].value),o="<table>";0<t&&0<n&&(o+=Array(t+1).join("<tr>"+Array(n+1).join("<td><br /></td>")+"</tr>"),r.wysiwygEditorInsertHtml(o+="</table>"),r.closeDropDown(!0),e.preventDefault())}),r.createDropDown(e,"inserttable",i)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{_dropDown:function(t,e,n,o){var r=Ee("div"),i=(Ne(r,Pe("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0)),ke(r,"#image")[0]);i.value=n,Ae(r,"click",".button",function(e){i.value&&o(i.value,ke(r,"#width")[0].value,ke(r,"#height")[0].value),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",r)},exec:function(e){var r=this;Be.image._dropDown(r,e,"",function(e,t,n){var o="";t&&(o+=' width="'+parseInt(t,10)+'"'),n&&(o+=' height="'+parseInt(n,10)+'"'),o+=' src="'+He(e)+'"',r.wysiwygEditorInsertHtml("<img"+o+" />")})},tooltip:"Insert an image"},email:{_dropDown:function(n,e,o){var r=Ee("div");Ne(r,Pe("email",{label:n._("E-mail:"),desc:n._("Description (optional):"),insert:n._("Insert")},!0)),Ae(r,"click",".button",function(e){var t=ke(r,"#email")[0].value;t&&o(t,ke(r,"#des")[0].value),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"insertemail",r)},exec:function(e){var n=this;Be.email._dropDown(n,e,function(e,t){!n.getRangeHelper().selectedHtml()||t?n.wysiwygEditorInsertHtml('<a href="mailto:'+He(e)+'">'+He(t||e)+"</a>"):n.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(t,e,n){var o=Ee("div"),r=(Ne(o,Pe("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0)),ke(o,"#link")[0]);function i(e){r.value&&n(r.value,ke(o,"#des")[0].value),t.closeDropDown(!0),e.preventDefault()}Ae(o,"click",".button",i),Ae(o,"keypress",function(e){13===e.which&&r.value&&i(e)},!0),t.createDropDown(e,"insertlink",o)},exec:function(e){var n=this;Be.link._dropDown(n,e,function(e,t){t||!n.getRangeHelper().selectedHtml()?n.wysiwygEditorInsertHtml('<a href="'+He(e)+'">'+He(t||e)+"</a>"):n.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return Ce(this.currentNode(),"a")?0:-1},exec:function(){var e=Ce(this.currentNode(),"a");if(e){for(;e.firstChild;)Oe(e.firstChild,e);Se(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",r="</blockquote>";t?(o=o+(n=n?"<cite>"+He(n)+"</cite>":"")+t+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r="<br />"+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(d){var f=this;f.createDropDown(d,"emoticons",function t(e){var n,o=f.opts,r=o.emoticonsRoot||"",i=o.emoticonsCompat,a=f.getRangeHelper(),l=i&&" "!==a.getOuterText(!0,1)?" ":"",s=i&&" "!==a.getOuterText(!1,1)?" ":"",c=Ee("div"),u=Ee("div"),i=be({},o.emoticons.dropdown,e?o.emoticons.more:{});return Ne(c,u),n=Math.sqrt(Object.keys(i).length),Ae(c,"click","img",function(e){f.insert(l+_e(this,"alt")+s,null,!1).closeDropDown(!0),e.preventDefault()}),xe(i,function(e,t){Ne(u,Ee("img",{src:wt(r+(t.url||t)),alt:e,title:t.tooltip||e})),u.children.length>=n&&(u=Ee("div"),Ne(c,u))}),!e&&o.emoticons.more&&(Ne(a=Ee("a",{className:"sceditor-more"}),document.createTextNode(f._("More"))),Ae(a,"click",function(e){f.createDropDown(d,"more-emoticons",t(!0)),e.preventDefault()}),Ne(c,a)),c}(!1))},txtExec:function(e){Be.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(r,e,i){var a=Ee("div");Ne(a,Pe("youtubeMenu",{label:r._("Video URL:"),insert:r._("Insert")},!0)),Ae(a,"click",".button",function(e){var t=(n=ke(a,"#link")[0].value).match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/),n=n.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),o=0;n&&xe(n[1].split(/[hms]/),function(e,t){""!==t&&(o=60*o+Number(t))}),t&&/^[a-zA-Z0-9_\-]{11}$/.test(t[1])&&i(t[1],o),r.closeDropDown(!0),e.preventDefault()}),r.createDropDown(e,"insertlink",a)},exec:function(e){var n=this;Be.youtube._dropDown(n,e,function(e,t){n.wysiwygEditorInsertHtml(Pe("youtube",{id:e,time:t},!1,!1))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1;return o<10&&(o="0"+o),(t=t.getDate())<10&&(t="0"+t),e.opts.dateFormat.replace(/year/i,n<2e3?1900+n:n).replace(/month/i,o).replace(/day/i,t)},exec:function(){this.insertText(Be.date._date(this))},txtExec:function(){this.insertText(Be.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+((e=e.getSeconds())<10?"0"+e:e)},exec:function(){this.insertText(Be.time._time())},txtExec:function(){this.insertText(Be.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!Me(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!Me(t,"body")))&&(e="ltr"===Re(t,"direction")?"":"ltr",Re(t,"direction",e))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!Me(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!Me(t,"body")))&&(e="rtl"===Re(t,"direction")?"":"rtl",Re(t,"direction",e))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize()),this.focus()},txtExec:function(){this.maximize(!this.maximize()),this.focus()},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode(),this.focus()},txtExec:function(){this.toggleSourceMode(),this.focus()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},z={};function en(i){function a(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)}function e(e,t){for(var n,o=a((e=[].slice.call(e)).shift()),r=0;r<l.length;r++)if(o in l[r]&&(n=l[r][o].apply(i,e),t))return n}var r=this,l=[];r.call=function(){e(arguments,!1)},r.callOnlyFirst=function(){return e(arguments,!0)},r.hasHandler=function(e){var t=l.length;for(e=a(e);t--;)if(e in l[t])return!0;return!1},r.exists=function(e){return e in z&&"function"==typeof(e=z[e])&&"object"==typeof e.prototype},r.isRegistered=function(e){if(r.exists(e))for(var t=l.length;t--;)if(l[t]instanceof z[e])return!0;return!1},r.register=function(e){return!(!r.exists(e)||r.isRegistered(e)||(e=new z[e],l.push(e),"init"in e&&e.init.call(i),0))},r.deregister=function(e){var t,n=l.length,o=!1;if(r.isRegistered(e))for(;n--;)l[n]instanceof z[e]&&(o=!0,"destroy"in(t=l.splice(n,1)[0]))&&t.destroy.call(i);return o},r.destroy=function(){for(var e=l.length;e--;)"destroy"in l[e]&&l[e].destroy.call(i);l=[],i=null}}en.plugins=z;var F=function(e,t,n){var o,r,i,a,l,s="",c=e.startContainer,u=e.startOffset;for(c&&3!==c.nodeType&&(c=c.childNodes[u],u=0),i=a=u;n>s.length&&c&&3===c.nodeType;)o=c.nodeValue,r=n-s.length,l&&(a=o.length,i=0),l=c,c=t?(u=i=Math.max(a-r,0),s=o.substr(i,a-i)+s,l.previousSibling):(u=i+(a=Math.min(r,o.length)),s+=o.substr(i,a),l.nextSibling);return{node:l||c,offset:u,text:s}};function tn(r,e,i){var a,l,s=e||r.contentDocument||r.document,c="sceditor-start-marker",u="sceditor-end-marker",h=this;h.insertHTML=function(e,t){var n,o;if(!h.selectedRange())return!1;for(t&&(e+=h.selectedHtml()+t),o=Ee("p",{},s),n=s.createDocumentFragment(),o.innerHTML=i(e);o.firstChild;)Ne(n,o.firstChild);h.insertNode(n)},l=function(e,t,n){var o,r=s.createDocumentFragment();if("string"==typeof e?(t&&(e+=h.selectedHtml()+t),r=ut(e)):(Ne(r,e),t&&(Ne(r,h.selectedRange().extractContents()),Ne(r,t))),o=r.lastChild){for(;!Fe(o.lastChild,!0);)o=o.lastChild;return pt(o)?o.lastChild||Ne(o,document.createTextNode("​")):o=r,h.removeMarkers(),Ne(o,a(c)),Ne(o,a(u)),n?(Ne(e=Ee("div"),r),e.innerHTML):r}},h.insertNode=function(e,t){var n,o,e=l(e,t),r=(t=h.selectedRange()).commonAncestorContainer,i=[];if(!e)return!1;function a(e){e&&m(e)&&i.indexOf(e)<0&&Se(e)}t.startContainer!==t.endContainer&&(xe(r.childNodes,function(e,t){m(t)&&i.push(t)}),n=e.firstChild,o=e.lastChild),t.deleteContents(),r&&3!==r.nodeType&&!pt(r)?Oe(e,r):(t.insertNode(e),a(n&&n.previousSibling),a(o&&o.nextSibling)),h.restoreRange()},h.cloneSelected=function(){var e=h.selectedRange();if(e)return e.cloneRange()},h.selectedRange=function(){var e,t,n=r.getSelection();if(n){if(n.rangeCount<=0){for(t=s.body;t.firstChild;)t=t.firstChild;(e=s.createRange()).setStartBefore(t),n.addRange(e)}return 0<n.rangeCount?n.getRangeAt(0):e}},h.hasSelection=function(){var e=r.getSelection();return e&&0<e.rangeCount},h.selectedHtml=function(){var e,t=h.selectedRange();return t?(Ne(e=Ee("p",{},s),t.cloneContents()),e.innerHTML):""},h.parentNode=function(){var e=h.selectedRange();if(e)return e.commonAncestorContainer},h.getFirstBlockParent=function(e){var t=function(e){return Fe(e,!0)?(e=e?e.parentNode:null)&&t(e):e};return t(e||h.parentNode())},h.insertNodeAt=function(e,t){var n=h.selectedRange(),o=h.cloneSelected();if(!o)return!1;o.collapse(e),o.insertNode(t),h.selectRange(n)},a=function(e){return h.removeMarker(e),(e=Ee("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},s)).innerHTML=" ",e},h.insertMarkers=function(){var e=h.selectedRange(),t=a(c);h.removeMarkers(),h.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(a(u),t.nextSibling):h.insertNodeAt(!1,a(u))},h.getMarker=function(e){return s.getElementById(e)},h.removeMarker=function(e){(e=h.getMarker(e))&&Se(e)},h.removeMarkers=function(){h.removeMarker(c),h.removeMarker(u)},h.saveRange=function(){h.insertMarkers()},h.selectRange=function(e){var t,n=r.getSelection(),o=e.endContainer;if(e.collapsed&&o&&!Fe(o,!0)){for(t=o.lastChild;t&&Me(t,".sceditor-ignore");)t=t.previousSibling;Me(t,"br")&&((o=s.createRange()).setEndAfter(t),o.collapse(!1),h.compare(e,o))&&(e.setStartBefore(t),e.collapse(!0))}n&&(h.clear(),n.addRange(e))},h.restoreRange=function(){var e,t=h.selectedRange(),n=h.getMarker(c),o=h.getMarker(u);if(!n||!o||!t)return!1;e=n.nextSibling===o,(t=s.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),h.selectRange(t),h.removeMarkers()},h.selectOuterText=function(e,t){var n=h.cloneSelected();if(!n)return!1;n.collapse(!1),e=F(n,!0,e),t=F(n,!1,t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),h.selectRange(n)},h.getOuterText=function(e,t){var n=h.cloneSelected();return n?(n.collapse(!e),F(n,e,t).text):""},h.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,s,c,u,d,f,p="(^|[\\s    ])",m=e.length,g=r?1:0,n=o||e[m-1][0].length;for(r&&n++,i=i||"",c=(a=h.getOuterText(!0,n)).length,a+=i,t&&(a+=h.getOuterText(!1,n));m--;)if(f=(d=e[m][0]).length,s=Math.max(0,c-f-g),l=-1,r?(u=a.substr(s).match(new RegExp(p+xt(d)+p)))&&(l=u.index+s+u[1].length):l=a.indexOf(d,s),-1<l&&l<=c&&c<=l+f+g)return h.selectOuterText(u=c-l,f-u-(/^\S/.test(i)?1:0)),h.insertHTML(e[m][1]),!0;return!1},h.compare=function(e,t){return t=t||h.selectedRange(),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},h.clear=function(){var e=r.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}}var H,n=navigator.userAgent,nn=/iPhone|iPod|iPad| wosbrowser\//i.test(n),on=(M=!!window.document.documentMode,O="-ms-ime-align"in document.documentElement.style,(t=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===t.contentEditable&&(t=/Opera Mobi|Opera Mini/i.test(n),/Android/i.test(n)&&(t=!0,/Safari/.test(n))&&(t=!(H=/Safari\/(\d+)/.exec(n))||!H[1]||H[1]<534),/ Silk\//i.test(n)&&(t=!(H=/AppleWebKit\/(\d+)/.exec(n))||!H[1]||H[1]<534),nn&&(t=/OS [0-4](_\d)+ like Mac/i.test(n)),/Firefox/i.test(n)&&(t=!1),/OneBrowser/i.test(n)&&(t=!1),"UCWEB"===navigator.vendor&&(t=!1),!(t=M||O||t))),Ue=window,We=document,rn=/^image\/(p?jpe?g|gif|png|bmp)$/i;function an(e,t){var n;f(e,function(e){Fe(e,!0)?(n||e.nodeType===Te?/\S/.test(e.nodeValue):!Me(e,".sceditor-ignore"))&&(n||Oe(n=Ee("p",{},t),e),Ne(n,e)):n=null},!1,!0)}function $e(r,e){var a,x,u,i,o,f,d,l,s,c,p,t,m,g,h,v,y,z,F,n,b,H,P,w,T,B,U,W,j,V,G,q,Y,$,X,K,Z,Q,J,ee,E,te,ne,oe,re,ie,C,ae,S,le,se,ce,ue,de,fe,N,pe,k,me,A,D=this,_={},ge=[],R=[],M={},he={},O={},L=(D.commands=be(!0,{},e.commands||Be),D.opts=be(!0,{},bt,e)),ve=(D.opts.emoticons=e.emoticons||bt.emoticons,Array.isArray(L.allowedIframeUrls)||(L.allowedIframeUrls=[]),L.allowedIframeUrls.push("https://www.youtube-nocookie.com/embed/"),Jt());function I(e){var t=["iframe"].concat(L.allowedTags),n=["allowfullscreen","frameborder","target"].concat(L.allowedAttributes);return ve.sanitize(e,{ADD_TAGS:t,ADD_ATTR:n})}ve.addHook("uponSanitizeElement",function(e,t){var n=L.allowedIframeUrls;if("iframe"===t.tagName){for(var o=_e(e,"src")||"",r=0;r<n.length;r++){var i=n[r];if(ye(i)&&o.substr(0,i.length)===i)return;if(i.test&&i.test(o))return}Se(e)}}),ve.addHook("afterSanitizeAttributes",function(e){"target"in e&&_e(e,"data-sce-target",_e(e,"target")),Je(e,"target")}),e=function(){function e(){De(Ue,"load",e),L.autofocus&&ce(!!L.autofocusEnd),A(),S(),g.call("ready"),"onReady"in a&&a.onReady.call(D)}r._sceditor=D,L.locale&&"en"!==L.locale&&j(),Oe(x=Ee("div",{className:"sceditor-container"}),r),Re(x,"z-index",L.zIndex),F=r.required,r.required=!1;var t=$e.formats[L.format];a=t?new t:{},g=new en(D),(L.plugins||"").split(",").forEach(function(e){g.register(e.trim())}),"init"in a&&a.init.call(D),$(),V(),W(),G(),q(),on||D.toggleSourceMode(),C(),Ae(Ue,"load",e),"complete"===We.readyState&&e()},j=function(){var e;(t=$e.locale[L.locale])||(e=L.locale.split("-"),t=$e.locale[e[0]]),t&&t.dateFormat&&(L.dateFormat=t.dateFormat)},W=function(){l=Ee("textarea"),i=Ee("iframe",{frameborder:0,allowfullscreen:!0}),L.startInSourceMode?(Le(x,"sourceMode"),et(i)):(Le(x,"wysiwygMode"),et(l)),L.spellcheck||_e(x,"spellcheck","false"),"https:"===Ue.location.protocol&&_e(i,"src","about:blank"),Ne(x,i),Ne(x,l),D.dimensions(L.width||at(r),L.height||ze(r)),ve.isValidAttribute("link","href",L.style)||(L.style=""),/^[a-z\-0-9 ]+$/i.test(L.charset)||(L.charset="UTF-8"),(d=i.contentDocument).open(),d.write(Pe("html",{attrs:nn?' class="ios"':"",spellcheck:L.spellcheck?"":'spellcheck="false"',charset:L.charset,style:He(L.style)},!1,!1)),d.close(),f=d.body,o=i.contentWindow,D.readOnly(!!L.readOnly),nn&&(ze(f,"100%"),Ae(f,"touchend",D.focus));var e=_e(r,"tabindex");_e(l,"tabindex",e),_e(i,"tabindex",e),m=new tn(o,null,I),et(r),D.val(r.value),(e=L.placeholder||_e(r,"placeholder"))&&(l.placeholder=e,_e(f,"placeholder",e))},G=function(){L.autoUpdate&&(Ae(f,"blur",me),Ae(l,"blur",me)),null===L.rtl&&(L.rtl="rtl"===Re(l,"direction")),D.rtl(!!L.rtl),L.autoExpand&&(Ae(f,"load",A,!0),Ae(f,"input keyup",A)),L.resizeEnabled&&Y(),_e(x,"id",L.id),D.emoticons(L.emoticonsEnabled)},q=function(){var e=r.form,t="compositionstart compositionend",n="keydown keyup keypress focus blur contextmenu input",o="onselectionchange"in d?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";Ae(We,"click",re),e&&(Ae(e,"reset",E),Ae(e,"submit",D.updateOriginal,!0)),Ae(window,"pagehide",D.updateOriginal),Ae(window,"pageshow",E),Ae(f,"keypress",ee),Ae(f,"keydown",Q),Ae(f,"keydown",J),Ae(f,"keyup",S),Ae(f,"blur",pe),Ae(f,"keyup",k),Ae(f,"paste",X),Ae(f,"cut copy",K),Ae(f,t,ne),Ae(f,o,le),Ae(f,n,oe),L.emoticonsCompat&&Ue.getSelection&&Ae(f,"keyup",de),Ae(f,"blur",function(){D.val()||Le(f,"placeholder")}),Ae(f,"focus",function(){it(f,"placeholder")}),Ae(l,"blur",pe),Ae(l,"keyup",k),Ae(l,"keydown",Q),Ae(l,t,ne),Ae(l,n,oe),Ae(d,"mousedown",te),Ae(d,o,le),Ae(d,"keyup",S),Ae(x,"selectionchanged",se),Ae(x,"selectionchanged",C),Ae(x,"selectionchanged valuechanged nodechanged pasteraw paste",oe)},V=function(){var i,a=D.commands,l=(L.toolbarExclude||"").split(","),e=L.toolbar.split("|");u=Ee("div",{className:"sceditor-toolbar",unselectable:"on"}),L.icons in $e.icons&&(T=new $e.icons[L.icons]),xe(e,function(e,t){i=Ee("div",{className:"sceditor-group"}),xe(t.split(","),function(e,t){var n,o,r=a[t];!r||-1<l.indexOf(t)||(n=r.shortcut,o=Pe("toolbarButton",{name:t,dispName:D._(r.name||r.tooltip||t)},!0).firstChild,T&&T.create&&T.create(t)&&(Oe(T.create(t),o.firstChild),Le(o,"has-icon")),o._sceTxtMode=!!r.txtExec,o._sceWysiwygMode=!!r.exec,Ie(o,"disabled",!r.exec),Ae(o,"click",function(e){rt(o,"disabled")||U(o,r),C(),e.preventDefault()}),Ae(o,"mousedown",function(e){D.closeDropDown(),e.preventDefault()}),r.tooltip&&_e(o,"title",D._(r.tooltip)+(n?" ("+n+")":"")),n&&D.addShortcut(n,t),r.state?R.push({name:t,state:r.state}):ye(r.exec)&&R.push({name:t,state:r.exec}),Ne(i,o),he[t]=o)}),i.firstChild&&Ne(u,i)}),Ne(L.toolbarContainer||x,u)},Y=function(){function t(e){d=("touchmove"===e.type?(e=Ue.event,u=e.changedTouches[0].pageX,e.changedTouches[0]):(u=e.pageX,e)).pageY;var t=i+(d-o),n=g?r-(u-c):r+(u-c);0<b&&b<n&&(n=b),0<y&&n<y&&(n=y),L.resizeWidth||(n=!1),0<v&&v<t&&(t=v),0<h&&t<h&&(t=h),L.resizeHeight||(t=!1),(n||t)&&D.dimensions(n,t),e.preventDefault()}function n(e){m&&(m=!1,et(a),it(x,"resizing"),De(We,l,t),De(We,s,n),e.preventDefault())}var o,r,i,e=Ee("div",{className:"sceditor-grip"}),a=Ee("div",{className:"sceditor-resize-cover"}),l="touchmove mousemove",s="touchcancel touchend mouseup",c=0,u=0,d=0,f=at(x),p=ze(x),m=!1,g=D.rtl(),h=L.resizeMinHeight||p/1.5,v=L.resizeMaxHeight||2.5*p,y=L.resizeMinWidth||f/1.25,b=L.resizeMaxWidth||1.25*f;T&&T.create&&(p=T.create("grip"))&&(Ne(e,p),Le(e,"has-icon")),Ne(x,e),Ne(x,a),et(a),Ae(e,"touchstart mousedown",function(e){o=("touchstart"===e.type?(e=Ue.event,c=e.touches[0].pageX,e.touches[0]):(c=e.pageX,e)).pageY,r=at(x),i=ze(x),m=!0,Le(x,"resizing"),tt(a),Ae(We,l,t),Ae(We,s,n),e.preventDefault()})},$=function(){var e=L.emoticons,n=L.emoticonsRoot||"";xe(O=e?be({},e.more,e.dropdown,e.hidden):O,function(e,t){O[e]=Pe("emoticon",{key:e,url:n+(t.url||t),tooltip:t.tooltip||e}),L.emoticonsEnabled&&ge.push(Ee("img",{src:wt(n+(t.url||t))}))})},ce=function(e){var t,n=f.firstChild;if(st(x))if(D.sourceMode())t=e?l.value.length:0,l.setSelectionRange(t,t);else{if(gt(f),e)for((n=f.lastChild)||(n=Ee("p",{},d),Ne(f,n));n.lastChild;)Me(n=n.lastChild,"br")&&n.previousSibling&&(n=n.previousSibling);t=d.createRange(),pt(n)?t.selectNodeContents(n):(t.setStartBefore(n),e&&t.setStartAfter(n)),t.collapse(!e),m.selectRange(t),y=t,e&&(f.scrollTop=f.scrollHeight),D.focus()}},D.readOnly=function(e){return"boolean"!=typeof e?!l.readonly:(f.contentEditable=!e,l.readonly=!e,ie(e),D)},D.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===_e(l,"dir"):(_e(f,"dir",t),_e(l,"dir",t),it(x,"rtl"),it(x,"ltr"),Le(x,t),T&&T.rtl&&T.rtl(e),D)},ie=function(n){var o=D.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";xe(he,function(e,t){Ie(t,"disabled",n||!t[o])})},D.width=function(e,t){return e||0===e?(D.dimensions(e,null,t),D):at(x)},D.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:D.width(),height:D.height()}:(!1!==e&&(!1!==n&&(L.width=e),at(x,e)),!1!==t&&(!1!==n&&(L.height=t),ze(x,t)),D)},D.height=function(e,t){return e||0===e?(D.dimensions(null,e,t),D):ze(x)},D.maximize=function(e){var t="sceditor-maximize";return Xe(e)?rt(x,t):((e=!!e)&&(P=Ue.pageYOffset),Ie(We.documentElement,t,e),Ie(We.body,t,e),Ie(x,t,e),D.width(e?"100%":L.width,!1),D.height(e?"100%":L.height,!1),e||Ue.scrollTo(0,P),A(),D)},A=function(){L.autoExpand&&!H&&(H=setTimeout(D.expandToContent,200))},D.expandToContent=function(e){var t,n;D.maximize()||(clearTimeout(H),H=!1,b||(n=L.resizeMinHeight||L.height||ze(r),b={min:n,max:L.resizeMaxHeight||2*n}),(n=We.createRange()).selectNodeContents(f),n=n.getBoundingClientRect(),t=d.documentElement.clientHeight-1,n=n.bottom-n.top,n=D.height()+1+(n-t),e||-1===b.max||(n=Math.min(n,b.max)),D.height(Math.ceil(Math.max(n,b.min))))},D.destroy=function(){var e;g&&(g.destroy(),g=m=null,s&&Se(s),De(We,"click",re),(e=r.form)&&(De(e,"reset",E),De(e,"submit",D.updateOriginal,!0)),De(window,"pagehide",D.updateOriginal),De(window,"pageshow",E),Se(l),Se(u),Se(x),delete r._sceditor,tt(r),r.required=F)},D.createDropDown=function(e,t,n){t="sceditor-"+t;D.closeDropDown(),s&&rt(s,t)||(e=be({top:e.offsetTop,left:e.offsetLeft,marginTop:e.clientHeight},L.dropDownCss),Re(s=Ee("div",{className:"sceditor-dropdown "+t}),e),Ne(s,n),Ne(x,s),Ae(s,"click focusin",function(e){e.stopPropagation()}),s&&(t=ke(s,"input,textarea")[0])&&t.focus())},re=function(e){3!==e.which&&s&&!e.defaultPrevented&&(me(),D.closeDropDown())},K=function(e){var t=m.selectedRange();if(t){for(var n,o,r=Ee("div",{},d),i=t.commonAncestorContainer;i&&Fe(i,!0);)i.nodeType===we&&(o=i.cloneNode(),r.firstChild&&Ne(o,r.firstChild),Ne(r,o),n=n||o),i=i.parentNode;Ne(n||r,t.cloneContents()),gt(r),e.clipboardData.setData("text/html",r.innerHTML),xe(ke(r,"p"),function(e,t){ft(t,"div")}),xe(ke(r,"br"),function(e,t){t.nextSibling&&Fe(t.nextSibling,!0)||Se(t)}),Ne(f,r),e.clipboardData.setData("text/plain",r.innerText),Se(r),"cut"===e.type&&t.deleteContents(),e.preventDefault()}},X=function(e){var t,n,o=f,r=e.clipboardData;if(r){var i={},a=r.types,l=r.items;e.preventDefault();for(var s=0;s<a.length;s++){if(a.indexOf("text/html")<0&&Ue.FileReader&&l&&rn.test(l[s].type))return t=r.items[s].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){Z({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);i[a[s]]=r.getData(a[s])}i.text=i["text/plain"],i.html=I(i["text/html"]),Z(i)}else if(!w){var c=o.scrollTop;for(m.saveRange(),w=We.createDocumentFragment();o.firstChild;)Ne(w,o.firstChild);setTimeout(function(){var e=o.innerHTML;o.innerHTML="",Ne(o,w),o.scrollTop=c,w=!1,m.restoreRange(),Z({html:I(e)})},0)}},Z=function(e){var t=Ee("div",{},d),e=(g.call("pasteRaw",e),lt(x,"pasteraw",e),e.html?(t.innerHTML=I(e.html),mt(t)):t.innerHTML=He(e.text||""),{val:t.innerHTML}),t=("fragmentToSource"in a&&(e.val=a.fragmentToSource(e.val,d,h)),g.call("paste",e),lt(x,"paste",e),"fragmentToHtml"in a&&(e.val=a.fragmentToHtml(e.val,h)),g.call("pasteHtml",e),m.getFirstBlockParent());D.wysiwygEditorInsertHtml(e.val,null,!0),function e(t){if(t.nodeType===we){for(var n=t.parentNode,o=t.tagName,r=t.childNodes.length;r--;)e(t.childNodes[r]);if(Fe(t)&&"BR"!==o){for(r=t.style.length;r--;){var i=t.style[r];Re(n,i)===Re(t,i)&&t.style.removeProperty(i)}if(!t.style.length)if(Je(t,"style"),"FONT"===o&&(Re(t,"fontFamily").toLowerCase()===Re(n,"fontFamily").toLowerCase()&&Je(t,"face"),Re(t,"color")===Re(n,"color")&&Je(t,"color"),Re(t,"fontSize")===Re(n,"fontSize"))&&Je(t,"size"),!t.attributes.length&&/SPAN|FONT/.test(o))yt(t);else if(/B|STRONG|EM|SPAN|FONT/.test(o))for(var a=/B|STRONG/.test(o),l="EM"===o;n&&Fe(n)&&(!a||/bold|700/i.test(Re(n,"fontWeight")))&&(!l||"italic"===Re(n,"fontStyle"));){if((n.tagName===o||a&&/B|STRONG/.test(n.tagName))&&vt(n,t)){yt(t);break}n=n.parentNode}var s=t.nextSibling;s&&s.tagName===o&&vt(s,t)&&(Ne(t,s),yt(s))}}}(t)},D.closeDropDown=function(e){s&&(Se(s),s=null),!0===e&&D.focus()},D.wysiwygEditorInsertHtml=function(e,t,n){var o=ze(i);D.focus(),!n&&Ce(v,"code")||(m.insertHTML(e,t),m.saveRange(),B(),mt(f),an(f,d),tt(n=ke(f,"#sceditor-end-marker")[0]),e=f.scrollTop,t=ht(n).top+1.5*n.offsetHeight-o,et(n),(e<t||t+o<e)&&(f.scrollTop=t),N(!1),m.restoreRange(),S())},D.wysiwygEditorInsertText=function(e,t){D.wysiwygEditorInsertHtml(He(e),He(t))},D.insertText=function(e,t){return D.inSourceMode()?D.sourceEditorInsertText(e,t):D.wysiwygEditorInsertText(e,t),D},D.sourceEditorInsertText=function(e,t){var n,o=l.selectionStart,r=l.selectionEnd,i=l.scrollTop;l.focus(),n=l.value,t&&(e+=n.substring(o,r)+t),l.value=n.substring(0,o)+e+n.substring(r,n.length),l.selectionStart=o+e.length-(t?t.length:0),l.selectionEnd=l.selectionStart,l.scrollTop=i,l.focus(),N()},D.getRangeHelper=function(){return m},D.sourceEditorCaret=function(e){return l.focus(),e?(l.selectionStart=e.start,l.selectionEnd=e.end,this):{start:l.selectionStart,end:l.selectionEnd}},D.val=function(e,t){return ye(e)?(D.inSourceMode()?D.setSourceEditorValue(e):(!1!==t&&"toHtml"in a&&(e=a.toHtml(e)),D.setWysiwygEditorValue(e)),D):D.inSourceMode()?D.getSourceEditorValue(!1):D.getWysiwygEditorValue(t)},D.insert=function(e,t,n,o,r){var i;return D.inSourceMode()?D.sourceEditorInsertText(e,t):(t&&(i=m.selectedHtml(),e+=(!1!==n&&"fragmentToSource"in a?a.fragmentToSource(i,d,h):i)+t),!1!==n&&"fragmentToHtml"in a&&(e=a.fragmentToHtml(e,h)),!1!==n&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),D.wysiwygEditorInsertHtml(e)),D},D.getWysiwygEditorValue=function(e){for(var t,n=Ee("div",{},d),o=f.childNodes,r=0;r<o.length;r++)Ne(n,o[r].cloneNode(!0));return Ne(f,n),mt(n),Se(n),t=n.innerHTML,!1!==e&&a.hasOwnProperty("toSource")?a.toSource(t,d):t},D.getBody=function(){return f},D.getContentAreaContainer=function(){return i},D.getSourceEditorValue=function(e){var t=l.value;return!1!==e&&"toHtml"in a?a.toHtml(t):t},D.setWysiwygEditorValue=function(e){f.innerHTML=I(e=e||"<p><br /></p>"),B(),S(),N(),A()},D.setSourceEditorValue=function(e){l.value=e,N()},D.updateOriginal=function(){r.value=D.val()},B=function(){var e,l,s,c,t,u,d;L.emoticonsEnabled&&(e=f,l=O,s=L.emoticonsCompat,c=e.ownerDocument,t="(^|\\s| | | | |$)",u=[],d={},Qe(e,"code")||(xe(l,function(e){d[e]=new RegExp(t+xt(e)+t),u.push(e)}),u.sort(function(e,t){return t.length-e.length}),function e(t){for(t=t.firstChild;t;){if(t.nodeType!==we||Me(t,"code")||e(t),t.nodeType===Te)for(var n=0;n<u.length;n++){var o,r=t.nodeValue,i=u[n],a=s?r.search(d[i]):r.indexOf(i);-1<a&&(a=r.indexOf(i,a),o=ut(l[i],c),i=r.substr(a+i.length),o.appendChild(c.createTextNode(i)),t.nodeValue=r.substr(0,a),t.parentNode.insertBefore(o,t.nextSibling))}t=t.nextSibling}}(e)))},D.inSourceMode=function(){return rt(x,"sourceMode")},D.sourceMode=function(e){var t=D.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&D.toggleSourceMode(),D)},D.toggleSourceMode=function(){var e=D.inSourceMode();!on&&e||(e||(m.saveRange(),m.clear()),y=null,D.blur(),e?D.setWysiwygEditorValue(D.getSourceEditorValue()):D.setSourceEditorValue(D.getWysiwygEditorValue()),nt(l),nt(i),Ie(x,"wysiwygMode",e),Ie(x,"sourceMode",!e),ie(),C())},ae=function(){return l.focus(),l.value.substring(l.selectionStart,l.selectionEnd)},U=function(e,t){D.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?D.sourceEditorInsertText.apply(D,t.txtExec):t.txtExec.call(D,e,ae())):t.exec&&(Ke(t.exec)?t.exec.call(D,e):D.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},D.execCommand=function(e,t){var n=!1,o=D.commands[e];if(D.focus(),!Ce(m.parentNode(),"code")){try{n=d.execCommand(e,!1,t)}catch(e){}!n&&o&&o.errorMessage&&alert(D._(o.errorMessage)),C()}},le=function(){function e(){if(o.getSelection()&&o.getSelection().rangeCount<=0)y=null;else if(m&&!m.compare(y)){if((y=m.cloneSelected())&&y.collapsed){var e=y.startContainer,t=y.startOffset;for(t&&e.nodeType!==Te&&(e=e.childNodes[t]);e&&e.parentNode!==f;)e=e.parentNode;e&&Fe(e,!0)&&(m.saveRange(),an(f,d),m.restoreRange())}lt(x,"selectionchanged")}z=!1}z||(z=!0,"onselectionchange"in d?e():setTimeout(e,100))},se=function(){var e,t=m.parentNode();h!==t&&(e=h,h=t,v=m.getFirstBlockParent(t),lt(x,"nodechanged",{oldNode:e,newNode:h}))},D.currentNode=function(){return h},D.currentBlockNode=function(){return v},C=function(){var e,t,n="active",o=d,r=D.sourceMode();if(D.readOnly())xe(ke(u,n),function(e,t){it(t,n)});else{r||(t=m.parentNode(),e=m.getFirstBlockParent(t));for(var i=0;i<R.length;i++){var a=0,l=he[R[i].name],s=R[i].state,c=r&&!l._sceTxtMode||!r&&!l._sceWysiwygMode;if(ye(s)){if(!r)try{-1<(a=o.queryCommandEnabled(s)?0:-1)&&(a=o.queryCommandState(s)?1:0)}catch(e){}}else c||(a=s.call(D,t,e));Ie(l,"disabled",c||a<0),Ie(l,n,0<a)}T&&T.update&&T.update(r,t,e)}},ee=function(e){var t,n,o;e.defaultPrevented||(D.closeDropDown(),13===e.which&&!Me(v,"li,ul,ol")&&dt(v)&&(t=Ee("br",{},d),m.insertNode(t),(o=(n=t.parentNode).lastChild)&&o.nodeType===Te&&""===o.nodeValue&&(Se(o),o=n.lastChild),!Fe(n,!0)&&o===t&&Fe(t.previousSibling)&&m.insertHTML("<br>"),e.preventDefault()))},S=function(){ct(f,function(e){return e.nodeType!==we||/inline/.test(Re(e,"display"))||Me(e,".sceditor-nlf")||!dt(e)?!(3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||Me(e,"br"))&&void 0:((e=Ee("p",{},d)).className="sceditor-nlf",e.innerHTML="<br />",Ne(f,e),!1)})},E=function(){D.val(r.value)},te=function(){D.closeDropDown()},D._=function(){var n=arguments;return t&&t[n[0]]&&(n[0]=t[n[0]]),n[0].replace(/\{(\d+)\}/g,function(e,t){return void 0!==n[+t+1]?n[+t+1]:"{"+t+"}"})},oe=function(t){g&&g.call(t.type+"Event",t,D);var e=(t.target===l?"scesrc":"scewys")+t.type;_[e]&&_[e].forEach(function(e){e.call(D,t)})},D.bind=function(e,t,n,o){for(var r,i,a=(e=e.split(" ")).length;a--;)Ke(t)&&(r="scewys"+e[a],i="scesrc"+e[a],n||(_[r]=_[r]||[],_[r].push(t)),o||(_[i]=_[i]||[],_[i].push(t)),"valuechanged"===e[a])&&(N.hasHandler=!0);return D},D.unbind=function(e,t,n,o){for(var r=(e=e.split(" ")).length;r--;)Ke(t)&&(n||Ze(_["scewys"+e[r]]||[],t),o||Ze(_["scesrc"+e[r]]||[],t));return D},D.blur=function(e,t,n){return Ke(e)?D.bind("blur",e,t,n):(D.sourceMode()?l:f).blur(),D},D.focus=function(e,t,n){if(Ke(e))D.bind("focus",e,t,n);else if(D.inSourceMode())l.focus();else{if(ke(d,":focus").length)return;e=m.selectedRange(),y||ce(!0),e&&1===e.endOffset&&e.collapsed&&(t=e.endContainer)&&1===t.childNodes.length&&Me(t.firstChild,"br")&&(e.setStartBefore(t.firstChild),e.collapse(!0),m.selectRange(e)),o.focus(),f.focus()}return C(),D},D.keyDown=function(e,t,n){return D.bind("keydown",e,t,n)},D.keyPress=function(e,t,n){return D.bind("keypress",e,t,n)},D.keyUp=function(e,t,n){return D.bind("keyup",e,t,n)},D.nodeChanged=function(e){return D.bind("nodechanged",e,!1,!0)},D.selectionChanged=function(e){return D.bind("selectionchanged",e,!1,!0)},D.valueChanged=function(e,t,n){return D.bind("valuechanged",e,t,n)},ue=function(e){var n=0,o=D.emoticonsCache,t=String.fromCharCode(e.which);Ce(v,"code")||(o||(o=[],xe(O,function(e,t){o[n++]=[e,t]}),o.sort(function(e,t){return e[0].length-t[0].length}),D.emoticonsCache=o,D.longestEmoticonCode=o[o.length-1][0].length),!m.replaceKeyword(D.emoticonsCache,!0,!0,D.longestEmoticonCode,L.emoticonsCompat,t))||L.emoticonsCompat&&/^\s$/.test(t)||e.preventDefault()},de=function(){var e=v,t=m,n=/[^\s\xA0\u2002\u2003\u2009]+/,o=e&&ke(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var r=0;r<o.length;r++){var i,a,l,s,c=o[r],u=c.parentNode,d=c.previousSibling,f=c.nextSibling;(d&&n.test(d.nodeValue.slice(-1))||f&&n.test((f.nodeValue||"")[0]))&&(a=-1,l=(i=t.cloneSelected()).startContainer,s=d&&d.nodeValue||"",s+=ot(c,"sceditor-emoticon"),l===f&&(a=s.length+i.startOffset),l===e&&e.childNodes[i.startOffset]===f&&(a=s.length),l===d&&(a=i.startOffset),(f=f&&f.nodeType===Te?f:u.insertBefore(u.ownerDocument.createTextNode(""),f)).insertData(0,s),Se(c),d&&Se(d),-1<a)&&(i.setStart(f,a),i.collapse(!0),t.selectRange(i))}},D.emoticons=function(e){return e||!1===e?((L.emoticonsEnabled=e)?(Ae(f,"keypress",ue),D.sourceMode()||(m.saveRange(),B(),N(!1),m.restoreRange())):(xe(ke(f,"img[data-sceditor-emoticon]"),function(e,t){var n=ot(t,"sceditor-emoticon"),n=d.createTextNode(n);t.parentNode.replaceChild(n,t)}),De(f,"keypress",ue),N()),D):L.emoticonsEnabled},D.css=function(e){return n||(n=Ee("style",{id:"inline"},d),Ne(d.head,n)),ye(e)?(n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e,D):n.styleSheet?n.styleSheet.cssText:n.innerHTML},Q=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[r]||String.fromCharCode(r).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?i=o[r]:n[i]&&(i=n[i])),i&&(r<16||18<r)&&t.push(i),t=t.join("+"),M[t]&&!1===M[t].call(D)&&(e.stopPropagation(),e.preventDefault())},D.addShortcut=function(e,t){return e=e.toLowerCase(),ye(t)?M[e]=function(){return U(he[t],D.commands[t]),!1}:M[e]=t,D},D.removeShortcut=function(e){return delete M[e.toLowerCase()],D},J=function(e){var t,n,o;if(!L.disableBlockRemove&&8===e.which&&(n=m.selectedRange())&&(t=n.startContainer,0===n.startOffset)&&(o=fe())&&!Me(o,"body")){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==Te||t.nodeValue)return;if(!(t=t.parentNode))return}D.clearBlockFormatting(o),e.preventDefault()}},fe=function(){for(var e=v;!dt(e)||Fe(e,!0);)if(!(e=e.parentNode)||Me(e,"body"))return;return e},D.clearBlockFormatting=function(e){return(e=e||fe())&&!Me(e,"body")&&(m.saveRange(),e.className="",_e(e,"style",""),Me(e,"p,div,td")||ft(e,"p"),m.restoreRange()),D},N=function(e){var t,n,o;g&&(g.hasHandler("valuechangedEvent")||N.hasHandler)&&(o=!(n=D.sourceMode())&&m.hasSelection(),e=(c=!1)!==e&&!d.getElementById("sceditor-start-marker"),p&&(clearTimeout(p),p=!1),o&&e&&m.saveRange(),(t=n?l.value:f.innerHTML)!==N.lastVal&&(N.lastVal=t,lt(x,"valuechanged",{rawValue:n?D.val():t})),o)&&e&&m.removeMarkers()},pe=function(){p&&N()},k=function(e){var e=e.which,t=13===(n=k.lastChar)||32===n,n=8===n||46===n;k.lastChar=e,c||(13===e||32===e?t?k.triggerNext=!0:N():8===e||46===e?n?k.triggerNext=!0:N():k.triggerNext&&(N(),k.triggerNext=!1),clearTimeout(p),p=setTimeout(function(){c||N()},1500))},ne=function(e){(c=/start/i.test(e.type))||N()},me=function(){D.updateOriginal()},e()}$e.locale={},$e.formats={},$e.icons={},$e.command={get:function(e){return Be[e]||null},set:function(e,t){return!(!e||!t)&&((t=be(Be[e]||{},t)).remove=function(){$e.command.remove(e)},Be[e]=t,this)},remove:function(e){return Be[e]&&delete Be[e],this}},window.sceditor={command:$e.command,commands:Be,defaultOptions:bt,ios:nn,isWysiwygSupported:on,regexEscape:xt,escapeEntities:He,escapeUriScheme:wt,dom:{css:Re,attr:_e,removeAttr:Je,is:Me,closest:Ce,width:at,height:ze,traverse:f,rTraverse:ct,parseHTML:ut,hasStyling:dt,convertElement:ft,blockLevelList:p,canHaveChildren:pt,isInline:Fe,copyCSS:function(e,t){t.style&&e.style&&(t.style.cssText=e.style.cssText+t.style.cssText)},fixNesting:mt,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if((n=e)!==t&&n.contains&&n.contains(t))return e;var n},getSibling:g,removeWhiteSpace:gt,extractContents:h,getOffset:ht,getStyle:v,hasStyle:function(e,t,n){return!!(e=v(e,t))&&(!n||e===n||Array.isArray(n)&&-1<n.indexOf(e))}},locale:$e.locale,icons:$e.icons,utils:{each:xe,isEmptyObject:s,extend:be},plugins:en.plugins,formats:$e.formats,create:function(e,t){t=t||{},Qe(e,".sceditor-container")||(t.runWithoutWysiwygSupport||on)&&new $e(e,t)},instance:function(e){return e._sceditor}},i.default.sceditor=window.sceditor,i.default.fn.sceditor=function(e){var t,n=[];return this.each(function(){t=this._sceditor,"state"===e?n.push(!!t):"instance"===e?n.push(t):t||i.default.sceditor.create(this,e)}),n.length?1===n.length?n[0]:n:this}})(),(T=>{var E=T.dom,e=T.utils,C=E.css,o=E.attr,S=E.is,N=E.removeAttr,n=E.convertElement,i=e.extend,a=e.each,k=e.isEmptyObject,l=T.command.get,t={bold:{txtExec:["<strong>","</strong>"]},italic:{txtExec:["<em>","</em>"]},underline:{txtExec:['<span style="text-decoration:underline;">',"</span>"]},strike:{txtExec:['<span style="text-decoration:line-through;">',"</span>"]},subscript:{txtExec:["<sub>","</sub>"]},superscript:{txtExec:["<sup>","</sup>"]},left:{txtExec:['<div style="text-align:left;">',"</div>"]},center:{txtExec:['<div style="text-align:center;">',"</div>"]},right:{txtExec:['<div style="text-align:right;">',"</div>"]},justify:{txtExec:['<div style="text-align:justify;">',"</div>"]},font:{txtExec:function(e){var t=this;l("font")._dropDown(t,e,function(e){t.insertText('<span style="font-family:'+e+';">',"</span>")})}},size:{txtExec:function(e){var t=this;l("size")._dropDown(t,e,function(e){t.insertText('<span style="font-size:'+e+';">',"</span>")})}},color:{txtExec:function(e){var t=this;l("color")._dropDown(t,e,function(e){t.insertText('<span style="color:'+e+';">',"</span>")})}},bulletlist:{txtExec:["<ul><li>","</li></ul>"]},orderedlist:{txtExec:["<ol><li>","</li></ol>"]},table:{txtExec:["<table><tr><td>","</td></tr></table>"]},horizontalrule:{txtExec:["<hr />"]},code:{txtExec:["<code>","</code>"]},image:{txtExec:function(e,t){var r=this;l("image")._dropDown(r,e,t,function(e,t,n){var o="";t&&(o+=' width="'+t+'"'),n&&(o+=' height="'+n+'"'),r.insertText("<img"+o+' src="'+e+'" />')})}},email:{txtExec:function(e,n){var o=this;l("email")._dropDown(o,e,function(e,t){o.insertText('<a href="mailto:'+e+'">'+(t||n||e)+"</a>")})}},link:{txtExec:function(e,n){var o=this;l("link")._dropDown(o,e,function(e,t){o.insertText('<a href="'+e+'">'+(t||n||e)+"</a>")})}},quote:{txtExec:["<blockquote>","</blockquote>"]},youtube:{txtExec:function(e){var n=this;l("youtube")._dropDown(n,e,function(e,t){n.insertText('<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque&start='+t+'" data-youtube-id="'+e+'" frameborder="0" allowfullscreen></iframe>')})}},rtl:{txtExec:['<div stlye="direction:rtl;">',"</div>"]},ltr:{txtExec:['<div stlye="direction:ltr;">',"</div>"]}};function A(){var r=this,n={},b={};function e(e,t,n){var p,o,r,i,a,l,s,c,u,d,f,m=n.createElement("div");if(m.innerHTML=t,C(m,"visibility","hidden"),n.body.appendChild(m),E.traverse(m,function(e){var t=e.nodeName.toLowerCase();x("*",e),x(t,e)},!0),p=m,E.traverse(p,function(e){var t,n=e.nodeName.toLowerCase(),o=e.parentNode,r=e.nodeType,i=!E.isInline(e),a=e.previousSibling,l=e.nextSibling,s="iframe"!==n&&function e(t,n){var o=t.childNodes,r=t.nodeName.toLowerCase(),i=t.nodeValue,a=o.length,l=A.allowedEmptyTags||[];if(n&&"br"===r)return!0;if(S(t,".sceditor-ignore"))return!0;if(-1<l.indexOf(r)||"td"===r||!E.canHaveChildren(t))return!1;if(i&&/\S|\u00A0/.test(i))return!1;for(;a--;)if(!e(o[a],n&&!t.previousSibling&&!t.nextSibling))return!1;if(t.getBoundingClientRect&&(t.className||t.hasAttributes("style")))return!(l=t.getBoundingClientRect()).width||!l.height;return!0}(e,o===p&&(!a&&!l)&&"br"!==n),c=e.ownerDocument,u=A.allowedTags,d=e.firstChild,f=A.disallowedTags;if(3!==r&&(4===r?n="!cdata":"!"!==n&&8!==r||(n="!comment"),1===r&&S(e,".sceditor-nlf")&&(!d||1===e.childNodes.length&&/br/i.test(d.nodeName)?s=!0:(e.classList.remove("sceditor-nlf"),e.className||N(e,"class"))),s?t=!0:u&&u.length?t=u.indexOf(n)<0:f&&f.length&&(t=-1<f.indexOf(n)),t)){if(!s){for(i&&a&&E.isInline(a)&&o.insertBefore(c.createTextNode(" "),e);e.firstChild;)o.insertBefore(e.firstChild,l);i&&l&&E.isInline(l)&&o.insertBefore(c.createTextNode(" "),l)}o.removeChild(e)}},!0),t=m,u=(c=A.allowedAttribs)&&!k(c),f=(d=A.disallowedAttribs)&&!k(d),b={},E.traverse(t,function(e){if(e.attributes&&(o=e.nodeName.toLowerCase(),a=e.attributes.length))for(b[o]||(b[o]=u?w(c["*"],c[o]):w(d["*"],d[o]));a--;)r=e.attributes[a],i=r.name,l=b[o][i],s=!1,u?s=null!==l&&(!Array.isArray(l)||l.indexOf(r.value)<0):f&&(s=null===l||Array.isArray(l)&&-1<l.indexOf(r.value)),s&&e.removeAttribute(i)}),!e){var g=m;E.removeWhiteSpace(g);for(var h,v,y=g.firstChild;y;)v=y.nextSibling,E.isInline(y)&&!S(y,".sceditor-ignore")?(h||(h=g.ownerDocument.createElement("p"),y.parentNode.insertBefore(h,y)),h.appendChild(y)):h=null,y=v}return t=(new T.XHTMLSerializer).serialize(m,!0),n.body.removeChild(m),t}function x(e,o){n[e]&&n[e].forEach(function(n){n.tags[e]?a(n.tags[e],function(e,t){!o.getAttributeNode||!(e=o.getAttributeNode(e))||t&&t.indexOf(e.value)<0||n.conv.call(r,o)}):n.conv&&n.conv.call(r,o)})}function w(e,t){var n={};return e&&(n=i({},n,e)),t&&a(t,function(e,t){Array.isArray(t)?n[e]=(n[e]||[]).concat(t):n[e]||(n[e]=null)}),n}r.init=function(){k(A.converters||{})||a(A.converters,function(e,t){a(t.tags,function(e){n[e]||(n[e]=[]),n[e].push(t)})}),this.commands=i(!0,{},t,this.commands)},r.toSource=e.bind(null,!1),r.fragmentToSource=e.bind(null,!0)}T.XHTMLSerializer=function(){var o={indentStr:"\t"},r=[],m=0;function g(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"," ":"&nbsp;"};return e?e.replace(/[&<>"\xa0]/g,function(e){return t[e]||e}):""}function h(e,t){switch(e.nodeType){case 1:var n,o,r,i=e,a=t,l=i.nodeName.toLowerCase(),s="iframe"===l,c=i.attributes.length,u=i.firstChild,d=a||/pre(?:\-wrap)?$/i.test(C(i,"whiteSpace")),f=!i.firstChild&&!E.canHaveChildren(i)&&!s;if(!S(i,".sceditor-ignore")){for(v("<"+l,!a&&y(i));c--;)o=i.attributes[c],r=o.value,v(" "+o.name.toLowerCase()+'="'+g(r)+'"',!1);for(v(f?" />":">",!1),s||(n=u);n;)m++,h(n,d),n=n.nextSibling,m--;f||v("</"+l+">",!d&&!s&&y(i)&&u&&y(u))}break;case 3:a=e,f=t,l=a.nodeValue;(l=f?l:l.replace(/[^\S\u00A0]+/g," "))&&v(g(l),!f&&y(a));break;case 4:v("<![CDATA["+g(e.nodeValue)+"]]>");break;case 8:v("\x3c!-- "+g(e.nodeValue)+" --\x3e");break;case 9:case 11:for(var p=e.firstChild;p;)h(p),p=p.nextSibling}}function v(e,t){var n=m;if(!1!==t)for(r.length&&r.push("\n");n--;)r.push(o.indentStr);r.push(e)}function y(e){var t=e.previousSibling;return 1!==e.nodeType&&t?!E.isInline(t):!t&&!E.isInline(e.parentNode)||!E.isInline(e)}this.serialize=function(e,t){if(r=[],t)for(e=e.firstChild;e;)h(e),e=e.nextSibling;else h(e);return r.join("")}},A.converters=[{tags:{"*":{width:null}},conv:function(e){C(e,"width",o(e,"width")),N(e,"width")}},{tags:{"*":{height:null}},conv:function(e){C(e,"height",o(e,"height")),N(e,"height")}},{tags:{li:{value:null}},conv:function(e){N(e,"value")}},{tags:{"*":{text:null}},conv:function(e){C(e,"color",o(e,"text")),N(e,"text")}},{tags:{"*":{color:null}},conv:function(e){C(e,"color",o(e,"color")),N(e,"color")}},{tags:{"*":{face:null}},conv:function(e){C(e,"fontFamily",o(e,"face")),N(e,"face")}},{tags:{"*":{align:null}},conv:function(e){C(e,"textAlign",o(e,"align")),N(e,"align")}},{tags:{"*":{border:null}},conv:function(e){C(e,"borderWidth",o(e,"border")),N(e,"border")}},{tags:{applet:{name:null},img:{name:null},layer:{name:null},map:{name:null},object:{name:null},param:{name:null}},conv:function(e){o(e,"id")||o(e,"id",o(e,"name")),N(e,"name")}},{tags:{"*":{vspace:null}},conv:function(e){C(e,"marginTop",+o(e,"vspace")),C(e,"marginBottom",+o(e,"vspace")),N(e,"vspace")}},{tags:{"*":{hspace:null}},conv:function(e){C(e,"marginLeft",+o(e,"hspace")),C(e,"marginRight",+o(e,"hspace")),N(e,"hspace")}},{tags:{hr:{noshade:null}},conv:function(e){C(e,"borderStyle","solid"),N(e,"noshade")}},{tags:{"*":{nowrap:null}},conv:function(e){C(e,"whiteSpace","nowrap"),N(e,"nowrap")}},{tags:{big:null},conv:function(e){C(n(e,"span"),"fontSize","larger")}},{tags:{small:null},conv:function(e){C(n(e,"span"),"fontSize","smaller")}},{tags:{b:null},conv:function(e){n(e,"strong")}},{tags:{u:null},conv:function(e){C(n(e,"span"),"textDecoration","underline")}},{tags:{s:null,strike:null},conv:function(e){C(n(e,"span"),"textDecoration","line-through")}},{tags:{dir:null},conv:function(e){n(e,"ul")}},{tags:{center:null},conv:function(e){C(n(e,"div"),"textAlign","center")}},{tags:{font:{size:null}},conv:function(e){C(e,"fontSize",C(e,"fontSize")),N(e,"size")}},{tags:{font:null},conv:function(e){n(e,"span")}},{tags:{"*":{type:["_moz"]}},conv:function(e){N(e,"type")}},{tags:{"*":{_moz_dirty:null}},conv:function(e){N(e,"_moz_dirty")}},{tags:{"*":{_moz_editor_bogus_node:null}},conv:function(e){e.parentNode.removeChild(e)}},{tags:{"*":{"data-sce-target":null}},conv:function(e){var t=o(e,"rel")||"",n=o(e,"data-sce-target");"_blank"===n&&S(e,"a")&&(/(^|\s)noopener(\s|$)/.test(t)||o(e,"rel","noopener"+(t?" "+t:"")),o(e,"target",n)),N(e,"data-sce-target")}},{tags:{code:null},conv:function(e){for(var t=e.getElementsByTagName("div");e=t[0];)e.style.display="block",n(e,"span")}}],A.allowedAttribs={},A.disallowedAttribs={},A.allowedTags=[],A.disallowedTags=[],A.allowedEmptyTags=[],T.formats.xhtml=A})(sceditor);